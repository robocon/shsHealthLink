CREATE DEFINER = `root`@`localhost` FUNCTION `NewProc`(`reaction` varchar(255))
 RETURNS varchar(255)
    NO SQL
BEGIN
	DECLARE a varchar(255);
	SET a = TRIM(BOTH ' ' FROM reaction);
	SET a = TRIM(LEADING ',' FROM a);
	SET a = REPLACE(a, ',', '|');
	SET a = TRIM(BOTH '|' FROM a);
	RETURN a;
END;



CREATE DEFINER = `root`@`localhost` FUNCTION `NewProc`(`idguard` varchar(4))
 RETURNS varchar(5)
    NO SQL
BEGIN

	DECLARE a varchar(5);

	IF idguard='mx07' OR idguard='mx04' OR idguard='mx05' OR idguard='' THEN 
		SET a = 'false';
	ELSE 
		SET a = 'true';
	END IF;

	RETURN a;
END;



CREATE DEFINER = `root`@`localhost` FUNCTION `NewProc`(`mDate` varchar(25))
 RETURNS varchar(25)
    NO SQL
BEGIN
	DECLARE fDate VARCHAR(25);
	SET fDate = CONCAT( (SUBSTRING(mDate,1,4) - 543), SUBSTRING(mDate,5, 25)  );
	RETURN fDate;
END;



CREATE DEFINER = `root`@`localhost` FUNCTION `NewProc`(`mDate` varchar(10))
 RETURNS date
    NO SQL
BEGIN
	# Support format yyyy-mm-dd to ENG DATE
	DECLARE fDate VARCHAR(10);
	SET fDate = CONCAT( (SUBSTRING(mDate,1,4) - 543), SUBSTRING(mDate,5,6)  );
	RETURN fDate;
END;

